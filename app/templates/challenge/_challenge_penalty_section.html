{# app/templates/challenge/_challenge_penalty_section.html #}
{# Enhanced version with modern styling #}
{# Expects: players (list of names for wheel), penalty_tab_id, challenge_index ('shared' or 'local') #}

{% set bi_icon_prefix = 'bi bi-' %} {# Define icon prefix #}

    {# --- Trigger Button --- #}
    <div class="text-center mb-4 pb-2"> {# Added some bottom padding #}
    <button class="btn btn-lg btn-warning lostGameBtn-{{ 'Shared' if challenge_index == 'shared' else 'Local' }} shadow-md d-inline-flex align-items-center justify-content-center" {# Added flex alignment #}
            data-penalty-tab-id="{{ penalty_tab_id }}"
            data-players="{{ players|tojson|safe if players else '[]' }}" {# Ensure valid JSON even if players is None #}
            title="Click if a game was lost">
        <i class="{{ bi_icon_prefix }}dice-6 me-2"></i> {# Dice Icon #}
        <span class="spinner-border spinner-border-sm me-2" style="display: none;"></span> {# Spinner #}
        <span>Lost Game - Spin Penalty</span> {# Slightly updated text #}
    </button>
    {# Add instruction text #}
    <p class="text-secondary small mt-2">Click above to spin for a randomly assigned penalty.</p>
</div>

{# --- Wheel Containers --- #}
{# Use justify-content-around for potentially better spacing #}
<div class="row justify-content-around mt-4 g-4"> {# Added gutter 'g-4' for more space #}

    {# Player Wheel Container - using card structure #}
    <div class="col-md-6 col-lg-5 text-center wheel-container mb-4" id="playerWheelContainer-{{ challenge_index }}" style="display: none;">
        <div class="card h-100 glass-effect shadow-sm"> {# Card with glass + shadow #}
             <div class="card-header bg-transparent text-secondary fw-bold d-flex align-items-center justify-content-center py-2"> {# Styled header #}
                 <i class="{{ bi_icon_prefix }}person-check-fill me-2 fs-5"></i> {# Icon #}
                 <span id="playerWheelTitle-{{ challenge_index }}">Selecting Participant...</span> {# Title #}
             </div>
             <div class="card-body d-flex align-items-center justify-content-center p-2"> {# Reduced padding #}
                 {# Canvas takes available space #}
                 <canvas id="playerWheelCanvas-{{ challenge_index }}" width="280" height="280" style="max-width: 100%; max-height: 280px;">Canvas not supported</canvas>
             </div>
        </div>
    </div>

    {# Penalty Wheel Container - using card structure #}
    <div class="col-md-6 col-lg-5 text-center wheel-container mb-4" id="penaltyWheelContainer-{{ challenge_index }}" style="display: none;">
         <div class="card h-100 glass-effect shadow-sm"> {# Card with glass + shadow #}
              <div class="card-header bg-transparent text-secondary fw-bold d-flex align-items-center justify-content-center py-2"> {# Styled header #}
                   <i class="{{ bi_icon_prefix }}shield-exclamation me-2 fs-5"></i> {# Icon #}
                   <span id="penaltyWheelTitle-{{ challenge_index }}">Selecting Penalty...</span> {# Title with ID #}
              </div>
              <div class="card-body d-flex align-items-center justify-content-center p-2"> {# Reduced padding #}
                   <canvas id="penaltyWheelCanvas-{{ challenge_index }}" width="280" height="280" style="max-width: 100%; max-height: 280px;">Canvas not supported</canvas>
              </div>
         </div>
    </div>

    {# Time Wheel Container - using card structure #}
    <div class="col-md-6 col-lg-5 text-center wheel-container mb-4" id="timeWheelContainer-{{ challenge_index }}" style="display: none;">
        <div class="card h-100 glass-effect shadow-sm">
            <div class="card-header bg-transparent text-secondary fw-bold d-flex align-items-center justify-content-center py-2">
                <i class="{{ bi_icon_prefix }}clock-history me-2 fs-5"></i> {# Icon for Time #}
                <span id="timeWheelTitle-{{ challenge_index }}">Selecting Duration...</span> {# Title #}
            </div>
            <div class="card-body d-flex align-items-center justify-content-center p-2">
                <canvas id="timeWheelCanvas-{{ challenge_index }}" width="280" height="280" style="max-width: 100%; max-height: 280px;">Canvas not supported</canvas>
            </div>
        </div>
    </div>
</div>

{# --- Result Display Area --- #}
{# Use Bootstrap alert styling for the result #}
<div id="penaltyResult-{{ challenge_index }}" class="mt-4 penalty-result-display alert alert-warning text-center fs-5 fw-semibold glass-effect shadow" style="display: none;" role="alert">
    {# Content dynamically added by penalty.js #}
</div>
