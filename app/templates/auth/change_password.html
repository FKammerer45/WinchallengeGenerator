{% extends "base.html" %}

{% block title %}Change Password{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <h2>Change Password</h2>
      <hr>
      {# REMOVED: {% include '_flashes.html' %} - Flashes handled by base.html #}
      {# Flashed messages will appear above this form via base.html #}

      <form method="post" action="{{ url_for('auth.change_password') }}" id="changePasswordForm">
        {# Assuming Flask-WTF for CSRF, otherwise use manual input #}
        {{ form.hidden_tag() if form else '' }}
        {# Manual CSRF token if not using Flask-WTF forms #}
        {% if not form %}
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        {% endif %}

        <div class="form-group">
          <label for="current_password">Current Password</label>
          <input type="password" class="form-control" id="current_password" name="current_password" required>
        </div>

        <div class="form-group">
          <label for="new_password">New Password</label>
          <input type="password" class="form-control" id="new_password" name="new_password" required
                 minlength="6" pattern="(?=.*\d).{6,}"
                 title="Password must be at least 6 characters long and contain at least one number">
          <small class="form-text text-muted">Must be at least 6 characters and contain one number.</small>
        </div>

        <div class="form-group">
          <label for="confirm_new_password">Confirm New Password</label>
          <input type="password" class="form-control" id="confirm_new_password" name="confirm_new_password" required>
        </div>

        <button type="submit" class="btn btn-primary">Update Password</button>
        <a href="{{ url_for('main.index') }}" class="btn btn-secondary ml-2">Cancel</a> {# Link back home #}
      </form>
    </div>
  </div>
</div>
{% endblock %}