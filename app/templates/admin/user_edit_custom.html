{% extends 'admin/model/edit.html' %}

{% block body %}
  {{ super() }}  {# Renders the main edit form for the User model #}

  {# Display Saved Game Tabs #}
  {% if model.saved_game_tabs %}
    <hr>
    <h3>Saved Game Tabs ({{ model.saved_game_tabs|length }})</h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tab Name</th>
          <th>Client ID</th>
          <th>Timestamp</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for tab in model.saved_game_tabs %}
          <tr>
            <td>{{ tab.id }}</td>
            <td>{{ tab.tab_name }}</td>
            <td>{{ tab.client_tab_id }}</td>
            <td>{{ tab.timestamp.strftime('%Y-%m-%d %H:%M:%S') if tab.timestamp else '' }}</td>
            <td>
              <a href="{{ url_for('savedgametab.edit_view', id=tab.id, url=return_url) }}" class="btn btn-xs btn-primary">
                <span class="fa fa-pencil"></span> Edit
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}

  {# Display Saved Penalty Tabs #}
  {% if model.saved_penalty_tabs %}
    <hr>
    <h3>Saved Penalty Tabs ({{ model.saved_penalty_tabs|length }})</h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Tab Name</th>
          <th>Client ID</th>
          <th>Timestamp</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for tab in model.saved_penalty_tabs %}
          <tr>
            <td>{{ tab.id }}</td>
            <td>{{ tab.tab_name }}</td>
            <td>{{ tab.client_tab_id }}</td>
            <td>{{ tab.timestamp.strftime('%Y-%m-%d %H:%M:%S') if tab.timestamp else '' }}</td>
            <td>
              <a href="{{ url_for('savedpenaltytab.edit_view', id=tab.id, url=return_url) }}" class="btn btn-xs btn-primary">
                <span class="fa fa-pencil"></span> Edit
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}

  {# Display Shared Challenges (Created by this User) #}
  {% if model.created_challenges %}
    <hr>
    <h3>Created Challenges ({{ model.created_challenges|length }})</h3>
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Public ID</th>
          <th>Name</th>
          <th>Created At</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for challenge in model.created_challenges %}
          <tr>
            <td>{{ challenge.id }}</td>
            <td>{{ challenge.public_id }}</td>
            <td>{{ challenge.name }}</td>
            <td>{{ challenge.created_at.strftime('%Y-%m-%d %H:%M:%S') if challenge.created_at else '' }}</td>
            <td>
              <a href="{{ url_for('sharedchallenge.edit_view', id=challenge.id, url=return_url) }}" class="btn btn-xs btn-primary">
                <span class="fa fa-pencil"></span> Edit
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
