/* static/css/overlay.css */

/* Define CSS variables for easy theming */
:root {
    --overlay-bg-color: rgba(15, 25, 45, 0.88);
    --overlay-text-color: #e8e8e8;
    --overlay-text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
    --overlay-accent-color: #00e5ff; /* Bright cyan accent */
    /* --overlay-success-color: #20c997; */ /* No longer primary for checkboxes */
    --overlay-progress-bar-bg: rgba(0, 0, 0, 0.4);
    --overlay-progress-bar-fill: var(--overlay-accent-color);
    --overlay-font-main: 'Inter', sans-serif;
    --overlay-font-mono: 'Fira Code', monospace;
    --overlay-border-radius: 8px;
    --overlay-error-bg: rgba(220, 53, 69, 0.9);
    --overlay-error-text: #ffffff;
    --overlay-success-bg: rgba(25, 135, 84, 0.9);
    --overlay-success-text: #ffffff;
    --overlay-warning-bg: rgba(255, 193, 7, 0.9);
    --overlay-warning-text: #212529;
    --overlay-base-font-size: 16px;
}

/* Apply base styles */
body {
    background-color: transparent !important;
    color: var(--overlay-text-color);
    font-family: var(--overlay-font-main);
    text-shadow: var(--overlay-text-shadow);
    margin: 0;
    padding: 0;
    overflow: hidden !important;
    font-size: var(--overlay-base-font-size);
    line-height: 1.5;
}

#overlay-container {
    background-color: var(--overlay-bg-color);
    border-radius: var(--overlay-border-radius);
    padding: 15px;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.6);
    max-width: 500px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    height: 100vh;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

/* Status Indicator */
.overlay-status-indicator {
    padding: 5px 10px;
    border-radius: var(--overlay-border-radius);
    margin-bottom: 10px;
    font-size: 0.85em;
    font-weight: 500;
    text-shadow: none;
    display: inline-flex;
    align-items: center;
    transition: opacity 0.5s ease-in-out, height 0.3s ease, padding 0.3s ease, margin 0.3s ease;
}
.overlay-status-indicator.hidden { opacity: 0; pointer-events: none; margin-bottom: 0; padding-top: 0; padding-bottom: 0; height: 0; border: none; }
.overlay-status-indicator:not(.hidden) { opacity: 1; }
.overlay-status-indicator .bi { margin-right: 6px; font-size: 1.1em; }
.overlay-status-indicator .spinner-border-sm { width: 0.9em; height: 0.9em; border-width: 0.15em; margin-right: 6px; }
.overlay-status-indicator { background-color: var(--overlay-error-bg); color: var(--overlay-error-text); border: 1px solid rgba(255,255,255,0.1); }
.overlay-status-indicator.connected { background-color: var(--overlay-success-bg); color: var(--overlay-success-text); border-color: rgba(255,255,255,0.2); }
.overlay-status-indicator.connecting { background-color: rgba(108, 117, 125, 0.8); color: #fff; border-color: rgba(255,255,255,0.1); }


.challenge-title {
    font-size: 1.4em;
    font-weight: 700;
    color: #ffffff;
    margin-bottom: 0.6em;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    padding-bottom: 0.4em;
    word-break: break-word;
}

.timer-display {
    font-family: var(--overlay-font-mono);
    font-size: 1.2em; /* Adjusted size */
    font-weight: 500;
    margin-bottom: 0.6em;
    color: #fff;
}


.progress-bar-container .progress-label {
    color: #ccc;
    margin-bottom: 4px;
    font-size: 0.9em;
}
.progress-bar-container .progress-label .value {
    color: #fff;
}
.progress-bar-container .progress {
    background-color: var(--overlay-progress-bar-bg);
    border-radius: var(--overlay-border-radius);
    overflow: hidden;
    height: 12px;
}
.progress-bar-container .progress-bar {
    background-color: var(--overlay-progress-bar-fill);
    transition: width 0.4s ease-in-out;
}

/* Rules List Styling & Scrollbar Hiding */
.rules-list {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 15px;
    background-color: rgba(0,0,0,0.25);
    border-radius: var(--overlay-border-radius);
    border: 1px solid rgba(255, 255, 255, 0.1);
    margin-bottom: 20px;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
}
.rules-list::-webkit-scrollbar { display: none; } /* Webkit */
.rules-list .section-title {
    font-weight: 600;
    color: #ccc;
    margin-top: 5px;
    margin-bottom: 8px;
    text-transform: uppercase;
    font-size: 0.8em;
    letter-spacing: 0.5px;
    padding-bottom: 4px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
}
.rules-list .progress-item {
    display: flex;
    align-items: center;
    margin-bottom: 8px;
    padding: 8px 10px;
    border-radius: 5px;
    transition: background-color 0.3s ease, opacity 0.3s ease;
    font-size: 1.05em;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    background-color: rgba(255, 255, 255, 0.03);
}
.rules-list .progress-item:last-child { border-bottom: none; }

/* --- Styling for Completed Items --- */
.rules-list .progress-item.completed {
    /* Using accent color tint now */
    background-color: rgba(0, 229, 255, 0.15); /* Accent color tint */
    opacity: 0.85; /* Slightly less faded */
}
.rules-list .progress-item.completed .rule-text {
     text-decoration: line-through;
     color: #b0b0b0; /* Slightly brighter dimmed text */
}
/* --- End Styling for Completed Items --- */


.rules-list .progress-item .checkbox-icons {
    margin-right: 8px;
    font-size: 1.1em;
    line-height: 1;
    color: #aaa; /* Default unchecked color */
    flex-shrink: 0;
    transition: color 0.3s ease;
}
/* --- Styling for CHECKED Icon --- */
/* Target the specific filled icon class */
.rules-list .progress-item.completed .checkbox-icons .bi-check-square-fill {
     color: var(--overlay-accent-color); /* Use ACCENT color for checked */
}
/* --- End Styling for CHECKED Icon --- */

.rules-list .rule-text {
    word-break: break-word;
    transition: color 0.3s ease;
}


/* ... (other groups styles) ... */
.other-groups-progress .section-title { font-weight: 600; color: #ccc; margin-bottom: 5px; text-transform: uppercase; font-size: 0.85em; letter-spacing: 0.5px; padding-bottom: 3px; }
.other-groups-progress ul { padding-left: 0; font-size: 0.9em; }
.other-groups-progress li { display: flex; justify-content: space-between; margin-bottom: 4px; color: #bbb; padding: 3px 0; }
.other-groups-progress li .percentage { font-weight: bold; color: #fff; }

/* ... (active penalty styles) ... */
.active-penalty { background-color: var(--overlay-warning-bg); color: var(--overlay-warning-text); border: 1px solid rgba(255, 193, 7, 0.6); padding: 8px 12px; border-radius: var(--overlay-border-radius); margin-top: 15px; font-size: 1em; text-shadow: none; display: flex; align-items: center; }
.active-penalty .label { font-weight: bold; margin-right: 8px; }
.active-penalty .bi { margin-right: 10px; font-size: 1.3em; }


/* ... (penalty wheels styles) ... */
.penalty-wheels-container { display: flex; justify-content: space-around; align-items: flex-start; margin-top: 15px; background-color: rgba(0,0,0,0.25); padding: 15px; border-radius: var(--overlay-border-radius); border: 1px solid rgba(255, 255, 255, 0.1); }
.penalty-wheels-container .wheel-title { text-align: center; margin-bottom: 8px; font-weight: bold; color: #ccc; font-size: 0.85em; text-transform: uppercase; }
.penalty-wheels-container canvas { display: block; margin: 0 auto; }
.penalty-result { text-align: center; margin-top: 10px; font-weight: bold; color: var(--overlay-accent-color); padding: 8px; background-color: rgba(0,0,0,0.4); border-radius: 5px; font-size: 1em; }


.hidden { display: none !important; }
.loading-text { color: #999; font-style: italic; }

/* CSS rule from previous fix for wrapping markers */
.overlay-progress-markers {
    display: flex;         /* Use flexbox */
    flex-wrap: wrap;       /* Allow wrapping */
    gap: 2px 6px;          /* Adjust vertical and horizontal gap */
    margin-top: 4px;       /* Space below the rule label */
}

.overlay-progress-markers .progress-item {
    margin: 0; /* Remove margin if using gap */
    padding: 2px; /* Small padding around icon */
    line-height: 1; /* Ensure icons align well */
}

.overlay-progress-markers .progress-item i {
     font-size: 1.1em; /* Adjust icon size if needed */
     vertical-align: middle;
}

.other-groups-progress .section-title {
    /* Style the "Other Groups:" title if needed */
    margin-bottom: 0.5rem;
    color: var(--text-secondary); /* Example color */
    text-transform: uppercase;
    font-weight: 600;
  }
  
  .other-group-item .group-name {
    color: #e0e0e0; /* Lighter text for name */
    max-width: 70%; /* Prevent very long names taking all space */
  }
  
  .other-group-item .percentage {
    color: #ffffff; /* Bright white for percentage */
    margin-left: 10px; /* Space between name and percentage */
  }
  
  .other-group-item {
    margin-bottom: 0.5rem;
    margin-left: 10px; /* Space between items */
    width: 100%; /* Ensure full width */
    overflow: hidden; /* Prevent overflow */
  }
  
  .other-group-item .progress {
    margin-left: 10px;
    width: 100%; /* Make progress container full width */
    max-width: 100%; /* Ensure it doesn't overflow */
    overflow: hidden; /* Hide overflow */
  }
  
 
  #other-groups-list .other-group-item .progress {
    background-color: rgba(255, 255, 255, 0.15) !important;
    border-radius: 3px;
    height: 10px !important;
  }
  
  #other-groups-list .other-group-item .progress-bar {
    background-color: #0dcaf0 !important;
    transition: width 0.5s ease-in-out;
  }