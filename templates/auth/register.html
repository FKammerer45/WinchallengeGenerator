{% extends "base.html" %}

{% block title %}Register - Win Challenge Generator{% endblock %}

{% block content %}
<div class="container mt-4">
  <h2>Register</h2>
  <form method="post" action="{{ url_for('auth.register') }}">
    <!-- CSRF token for security -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    
    <!-- Username field -->
    <div class="form-group">
      <label for="username">Username:</label>
      <input 
        type="text" 
        class="form-control" 
        name="username" 
        required 
        minlength="6" 
        placeholder="Enter username" 
        title="Username must be at least 6 characters long">
    </div>
    
    <!-- Password field -->
    <div class="form-group">
      <label for="password">Password:</label>
      <input 
        type="password" 
        class="form-control" 
        name="password" 
        required 
        minlength="6" 
        pattern="(?=.*\d).{6,}" 
        placeholder="Enter password" 
        title="Password must be at least 6 characters long and contain at least one number">
    </div>
    
    <!-- Confirm Password field -->
    <div class="form-group">
      <label for="confirm_password">Confirm Password:</label>
      <input 
        type="password" 
        class="form-control" 
        id="confirm_password" 
        name="confirm_password" 
        required 
        placeholder="Confirm your password">
    </div>
    
    <!-- reCAPTCHA widget -->
    <div class="form-group">
      <div class="g-recaptcha" data-sitekey="{{ config['RECAPTCHA_PUBLIC_KEY'] }}"></div>
    </div>
    
    <!-- Submit button -->
    <button type="submit" class="btn btn-primary">Register</button>
  </form>
  
  <!-- Link to login page -->
  <p class="mt-3">
    Already have an account? <a href="{{ url_for('auth.login') }}">Login here</a>.
  </p>
</div>
{% endblock %}

{% block scripts %}
  <!-- Load reCAPTCHA Enterprise script asynchronously -->
  <script src="https://www.google.com/recaptcha/enterprise.js" async defer></script>
{% endblock %}
